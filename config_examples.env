# WhisperX Configuration Examples
# Copy the appropriate section to your .env file or export directly

# ==============================================================================
# Accuracy Optimized
# ==============================================================================
export HUGGINGFACE_TOKEN=your_token_here
export WHISPERX_COMPUTE_TYPE=float32
export WHISPERX_BATCH_SIZE=8
export WHISPERX_CHAR_ALIGN=true
export MAX_CONCURRENT_REQUESTS=4
export MEMORY_PER_REQUEST_GB=6.0

export WHISPERX_CHUNK_LENGTH=15
export VAD_ONSET=0.500                    # UPDATED: Less sensitive to reduce over-detection
export VAD_OFFSET=0.200                   # UPDATED: Tighter boundaries
export ALIGN_MODEL=WAV2VEC2_ASR_LARGE_LV60K_960H
export INTERPOLATE_METHOD=linear
export SEGMENT_RESOLUTION=sentence
export ENABLE_REQUEST_QUEUING=true

# ==============================================================================
# BALANCED PRODUCTION (Speed vs Accuracy Balance) 
# ==============================================================================
export HUGGINGFACE_TOKEN=your_token_here
export WHISPERX_COMPUTE_TYPE=float16
export WHISPERX_BATCH_SIZE=12
export WHISPERX_CHAR_ALIGN=false
export MAX_CONCURRENT_REQUESTS=5
export MEMORY_PER_REQUEST_GB=4.5

# Production optimizations
export WHISPERX_CHUNK_LENGTH=20
export VAD_ONSET=0.450
export VAD_OFFSET=0.250
export ALIGN_MODEL=WAV2VEC2_ASR_BASE_960H
export INTERPOLATE_METHOD=linear
export SEGMENT_RESOLUTION=chunk
export ENABLE_REQUEST_QUEUING=true
export QUEUE_TIMEOUT=300

# ==============================================================================  
# H100 HIGH THROUGHPUT (Maximum Concurrency)
# ==============================================================================
export HUGGINGFACE_TOKEN=your_token_here
export WHISPERX_COMPUTE_TYPE=float16
export WHISPERX_BATCH_SIZE=16
export WHISPERX_CHAR_ALIGN=false
export MAX_CONCURRENT_REQUESTS=15
export MEMORY_PER_REQUEST_GB=5.0

# High throughput settings
export WHISPERX_CHUNK_LENGTH=25
export VAD_ONSET=0.450
export VAD_OFFSET=0.250
export ALIGN_MODEL=WAV2VEC2_ASR_BASE_960H
export INTERPOLATE_METHOD=linear
export SEGMENT_RESOLUTION=chunk
export ENABLE_REQUEST_QUEUING=true
export QUEUE_TIMEOUT=600

# ==============================================================================
# DEVELOPMENT/TESTING (Maximum Accuracy, Lower Concurrency)
# ==============================================================================
export HUGGINGFACE_TOKEN=your_token_here
export WHISPERX_COMPUTE_TYPE=float32
export WHISPERX_BATCH_SIZE=6
export WHISPERX_CHAR_ALIGN=true
export MAX_CONCURRENT_REQUESTS=2
export MEMORY_PER_REQUEST_GB=8.0

# Maximum accuracy settings
export WHISPERX_CHUNK_LENGTH=10
export VAD_ONSET=0.500
export VAD_OFFSET=0.200
export ALIGN_MODEL=WAV2VEC2_ASR_LARGE_LV60K_960H
export INTERPOLATE_METHOD=linear
export SEGMENT_RESOLUTION=word
export ENABLE_REQUEST_QUEUING=false

# ==============================================================================
# ENHANCED DIARIZATION (Customer Feedback Optimized)
# ==============================================================================
# Configuration specifically tuned to address customer reported issues:
# - Last sentence attribution errors
# - Speaker interruption handling problems
# - Improved VAD boundary detection

export HUGGINGFACE_TOKEN=your_token_here
export WHISPERX_COMPUTE_TYPE=float32
export WHISPERX_BATCH_SIZE=8
export WHISPERX_CHAR_ALIGN=true
export MAX_CONCURRENT_REQUESTS=3
export MEMORY_PER_REQUEST_GB=6.0

# Enhanced VAD Configuration (addressing customer feedback)
export VAD_ONSET=0.35                        # More sensitive boundary detection (reduced from 0.4)
export VAD_OFFSET=0.25                       # Tighter boundaries (reduced from 0.3)
export MIN_SEGMENT_LENGTH=0.5                # Minimum segment duration (prevents over-segmentation)
export MAX_SEGMENT_LENGTH=30.0               # Maximum segment duration
export SPEECH_THRESHOLD=0.6                  # Confidence threshold for speech detection

# Speaker Attribution Improvements
export SPEAKER_SMOOTHING_ENABLED=true        # Enable post-processing speaker smoothing
export SPEAKER_CONFIDENCE_THRESHOLD=0.8      # Minimum confidence for speaker attribution

# WhisperX Core Settings for Accuracy
export WHISPERX_CHUNK_LENGTH=15              # Optimal for conversation tracking
export ALIGN_MODEL=WAV2VEC2_ASR_LARGE_LV60K_960H
export INTERPOLATE_METHOD=linear
export SEGMENT_RESOLUTION=sentence           # Better for speaker boundary detection
export ENABLE_REQUEST_QUEUING=true

# Text Processing Enhancements
export TEXT_NORMALIZATION_MODE=enhanced      # Enable improved text normalization
export SENTIMENT_ANALYSIS_ENABLED=false     # Disable for now (future feature)

# ==============================================================================
# ADDITIONAL SETTINGS
# ==============================================================================

# Memory monitoring
export MEMORY_CHECK_INTERVAL=30

# API settings  
export API_HOST=0.0.0.0
export API_PORT=3333

# Hugging Face token for diarization (optional)
# export HUGGINGFACE_TOKEN=your_token_here